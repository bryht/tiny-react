# Tiny React - A Simplified React Library in TypeScript

A minimal implementation of React's core concepts in TypeScript, perfect for learning how React works internally.

## Features

âœ… **Hooks**
- `useState` - State management with automatic re-rendering
- `useEffect` - Side effects with dependency tracking
- `useCallback` - Memoized callbacks
- `useMemo` - Memoized computations

âœ… **Components**
- Functional components
- `React.memo` - Component memoization
- Props and children support

âœ… **JSX-Style Syntax**
- `h()` function for cleaner createElement calls
- `Fragment` for multiple children

âœ… **Performance Optimizations**
- Shallow equality checks for state updates
- Memoization of callbacks and computed values
- Component memoization to prevent unnecessary re-renders

## Project Structure

```
tiny-react/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ tiny-react.ts                    # Core library with full TypeScript types
â”‚   â”œâ”€â”€ app.ts                           # Main App component and entry point
â”‚   â”œâ”€â”€ types.ts                         # Shared type definitions
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ CallbackOptimization.ts      # useCallback + memo demo
â”‚   â”‚   â”œâ”€â”€ ConsoleDisplay.ts            # Console log display
â”‚   â”‚   â”œâ”€â”€ ExpensiveCalculator.ts       # useMemo demo
â”‚   â”‚   â”œâ”€â”€ OptimizedList.ts             # memo with list demo
â”‚   â”‚   â””â”€â”€ StateOptimization.ts         # State equality demo
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ renderLog.ts                 # Render logging utility
â”œâ”€â”€ dist/                                # Compiled JavaScript (generated by tsc)
â”œâ”€â”€ index.html                           # Main HTML file
â”œâ”€â”€ tsconfig.json                        # TypeScript configuration
â””â”€â”€ README.md                           # This file
```

## Getting Started

### Prerequisites
- Node.js and npm (for TypeScript compiler)

### Setup

1. **Install TypeScript** (if not already installed):
```bash
npm install -g typescript
```

2. **Compile TypeScript to JavaScript**:
```bash
# One-time compilation
npx tsc

# Or watch for changes during development
npx tsc --watch
```

3. **Open in browser**:
Open `index.html` in your web browser to see the demo.

## How It Works

### Core Concepts

#### 1. Virtual DOM
```typescript
interface VNode {
  type: string | Component;
  props: Record<string, any>;
  children: any[];
}
```

#### 2. State Management
```typescript
const [count, setCount] = TinyReact.useState(0);
// setState only triggers re-render if value actually changed
```

#### 3. Effects
```typescript
TinyReact.useEffect(() => {
  // Run after render
  return () => {
    // Cleanup on unmount or dependency change
  };
}, [dependencies]);
```

#### 4. Component Memoization
```typescript
const Button = TinyReact.memo(({ label, onClick }) => {
  // Only re-renders if props change
  return h('button', { onClick }, label);
});
```

### JSX-Style Syntax

Instead of verbose `createElement` calls:
```typescript
TinyReact.createElement('div', {}, 
  TinyReact.createElement('h1', {}, 'Hello')
)
```

Use the cleaner `h()` function:
```typescript
h('div', {},
  h('h1', {}, 'Hello')
)
```

## Building Components

### Simple Counter
```typescript
function Counter() {
  const [count, setCount] = TinyReact.useState(0);
  
  return h('div', {},
    h('p', {}, `Count: ${count}`),
    h('button', { onClick: () => setCount(count + 1) }, 'Increment')
  );
}
```

### With Memoization
```typescript
function App() {
  const [value, setValue] = TinyReact.useState('');
  
  // Memoize expensive computation
  const result = TinyReact.useMemo(() => {
    return expensiveCalculation(value);
  }, [value]);
  
  // Memoize callback
  const handleChange = TinyReact.useCallback((e) => {
    setValue(e.target.value);
  }, []);
  
  return h('div', {},
    h('p', {}, `Result: ${result}`),
    h('input', { onChange: handleChange })
  );
}
```

## Demo Examples

The demo application is organized into modular components in `src/components/`:

1. **ExpensiveCalculator** - Shows `useMemo` optimization for expensive computations
2. **CallbackOptimization** - Shows `useCallback` + `memo` working together
3. **StateOptimization** - Shows shallow equality checks in `useState`
4. **OptimizedList** - Shows `memo` preventing unnecessary re-renders in lists
5. **ConsoleDisplay** - Interactive log viewer to track component renders

## TypeScript Benefits

âœ… **Type Safety** - Catch errors at compile time
âœ… **IntelliSense** - Better IDE autocomplete
âœ… **Documentation** - Types serve as inline documentation
âœ… **Refactoring** - Easier to refactor with type checking

## Comparison with Real React

| Feature | Tiny React | Real React |
|---------|-----------|-----------|
| Core Size | ~400 lines | 40KB+ |
| Virtual DOM | âœ… Basic | âœ… Advanced |
| Hooks | âœ… 4 main hooks | âœ… 15+ hooks |
| Performance | âœ… Optimized | âœ… Highly optimized |
| Concurrent Features | âŒ | âœ… |
| Suspense | âŒ | âœ… |

## Learning Resources

This implementation is perfect for:
- Understanding React's internal workings
- Learning about hooks and state management
- Studying closures and functional programming in JavaScript
- Exploring TypeScript with a real-world example

## Limitations

This is a simplified implementation for learning. Real React is more sophisticated:
- No reconciliation (full re-render on changes)
- No concurrent rendering
- No suspense or error boundaries
- Limited TypeScript generics support
- No JSX transpilation (uses h() instead)

## Contributing

Feel free to extend this implementation:
- Add more hooks (useRef, useContext, etc.)
- Improve type definitions
- Add virtual DOM diffing for better performance
- Implement context API
- Add error boundaries

## License

MIT - Feel free to use for learning and personal projects

## Next Steps

1. Study the TypeScript types in `src/tiny-react.ts`
2. Understand the hook implementation and closure usage
3. Explore the modular component examples in `src/components/`
4. Check out `src/utils/renderLog.ts` to see how component renders are tracked
5. Try building your own components!

Happy learning! ğŸš€
